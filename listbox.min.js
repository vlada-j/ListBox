// ListBox JS | Required: jQuery 1.7.1 | https://github.com/vlada-j/ListBox-JS
jQuery.fn.ListBox=function(options){settings=jQuery.extend({orientation:'horizontal',prevButton:'#prev',nextButton:'#next',step:100,duration:500,easing:"swing"},options);this.each(function(i,one){var $this=$(one);var carrier=$this.children('ul');var viewport=$this.children('.viewport');var btn={};btn.prev=$this.children(settings.prevButton);btn.next=$this.children(settings.nextButton);var carrierLength=0;var items=[];var anim=false;var set=jQuery.extend({hor:settings.orientation,step:settings.step,dur:settings.duration,easing:settings.easing},{hor:$this.attr('data-orientation'),step:$this.attr('data-step'),dur:$this.attr('data-duration'),easing:$this.attr('data-easing')});set.hor.toLowerCase();set.hor=(set.hor=='vertical'||set.hor=='vert'||set.hor=='ver'||set.hor=='v')?false:true;if(set.hor)$this.attr('data-orientation','horizontal');else $this.attr('data-orientation','vertical');function refresh(){items=[];carrierLength=0;if(set.hor){var mbe='margin-left';var maf='margin-right';var att='width'}else{var mbe='margin-top';var maf='margin-bottom';var att='height'}$(carrier.children('li')).each(function(i,ele){items.push(ele);var ow=parseInt(set.hor?$(ele).outerWidth():$(ele).outerHeight());carrierLength+=ow+parseInt($(ele).css(mbe))+parseInt($(ele).css(maf))});carrier.css(att,carrierLength);testButtons()};this.scrollTo=function(steps){steps=steps===undefined?0:steps;scrolling(1*steps)};function goToPrev(){scrolling(-1)};function goToNext(){scrolling(+1)};function scrolling(dir){if(anim)return;var op={duration:set.dur,easing:set.easing,complete:testButtons};var st=set.step*dir;if(set.hor){viewport.animate({scrollLeft:(viewport.scrollLeft()+st)},op)}else{viewport.animate({scrollTop:(viewport.scrollTop()+st)},op)}anim=true};function testButtons(){anim=false;var curr=0,maxp=0;if(set.hor){maxp=carrierLength-viewport.width();curr=viewport.scrollLeft()}else{maxp=carrierLength-viewport.height();curr=viewport.scrollTop()}btn.prev.removeClass('disable');btn.next.removeClass('disable');if(curr==0){btn.prev.addClass('disable')}if(curr==maxp){btn.next.addClass('disable')}};$(function(){if(carrier.length==0){$this.append('<ul/>');carrier=$this.children('ul')}if(viewport.length==0){carrier.wrap('<div class="viewport" />');viewport=$this.children('.viewport')}if(btn.prev.length==0){$this.append('<a id="prev">&nbsp;</a>');btn.prev=$this.children('#prev')}if(btn.next.length==0){$this.append('<a id="next">&nbsp;</a>');btn.next=$this.children('#next')}btn.prev.click(goToPrev);btn.next.click(goToNext);$(window).load(refresh)})});return this};
